<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rewards — SARAL</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body class="dash-body">

  <!-- ═══════ SIDEBAR ═══════ -->
  <aside class="sidebar" id="sidebar">
    <div class="sidebar__top">
      <a href="index.html" class="sidebar__logo">
        <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
          <circle cx="14" cy="14" r="12" stroke="url(#sLogoG)" stroke-width="2.5"/>
          <path d="M9 14.5L12.5 18L19 11" stroke="url(#sLogoG)" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <defs><linearGradient id="sLogoG" x1="0" y1="0" x2="28" y2="28"><stop stop-color="#4F8CFF"/><stop offset="1" stop-color="#A78BFA"/></linearGradient></defs>
        </svg>
        <span>SARAL</span>
      </a>
    </div>

    <nav class="sidebar__nav">
      <a href="dashboard.html" class="sidebar__link">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><rect x="2" y="2" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.5"/><rect x="11" y="2" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.5"/><rect x="2" y="11" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.5"/><rect x="11" y="11" width="7" height="7" rx="2" stroke="currentColor" stroke-width="1.5"/></svg>
        <span>Overview</span>
      </a>
      <a href="report.html" class="sidebar__link">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M17 10a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" stroke-width="1.5"/><path d="M10 7v3l2 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        <span>New Report</span>
      </a>
      <a href="my-reports.html" class="sidebar__link">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M4 6h12M4 10h12M4 14h8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        <span>My Reports</span>
      </a>
      <a href="rewards.html" class="sidebar__link sidebar__link--active">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M10 2l2.09 4.26L17 6.97l-3.5 3.42.83 4.84L10 13.14l-4.33 2.09.83-4.84L3 6.97l4.91-.71L10 2z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>
        <span>Rewards</span>
      </a>
      <a href="settings.html" class="sidebar__link">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/><path d="M10 2v2M10 16v2M2 10h2M16 10h2M4.93 4.93l1.41 1.41M13.66 13.66l1.41 1.41M15.07 4.93l-1.41 1.41M6.34 13.66l-1.41 1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
        <span>Settings</span>
      </a>
    </nav>

    <div class="sidebar__profile">
      <div class="sidebar__profile-avatar">
        <span>AK</span>
      </div>
      <div class="sidebar__profile-info">
        <span class="sidebar__profile-name">Aarav Kumar</span>
        <span class="sidebar__profile-badge">
          <svg width="10" height="10" viewBox="0 0 10 10" fill="none"><circle cx="5" cy="5" r="4" fill="#FFD700"/></svg>
          Gold Champion
        </span>
      </div>
    </div>
    <button class="sidebar__logout" onclick="SaralAuth.signOut()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      <span>Logout</span>
    </button>
  </aside>

  <!-- ═══════ MOBILE HEADER ═══════ -->
  <header class="dash-header" id="dashHeader">
    <button class="dash-header__toggle" id="sidebarToggle">
      <span></span><span></span><span></span>
    </button>
    <a href="index.html" class="dash-header__logo">SARAL</a>
    <a href="report.html" class="dash-header__action">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 3v12M3 9h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
    </a>
  </header>

  <!-- ═══════ MAIN CONTENT ═══════ -->
  <main class="dash-main">
    <!-- Page Header -->
    <div class="dash-greeting" data-reveal>
      <div>
        <h1 class="dash-greeting__title">Karma <span class="text-gradient">Rewards</span></h1>
        <p class="dash-greeting__sub">Redeem your earned points for real-world benefits</p>
      </div>
    </div>

    <!-- Points Balance Card -->
    <div class="rewards-balance" data-reveal>
      <div class="rewards-balance__left">
        <span class="rewards-balance__label">Available Balance</span>
        <span class="rewards-balance__points" id="pointsBalance">0</span>
        <span class="rewards-balance__unit">Karma Points</span>
      </div>
      <div class="rewards-balance__right">
        <div class="rewards-balance__tier" id="tierBadge">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M12 2l3 6.26L22 9.27l-5 4.87L18.18 22 12 18.56 5.82 22 7 14.14 2 9.27l7-1.01L12 2z" fill="currentColor"/>
          </svg>
          <span id="tierName">Gold</span>
        </div>
        <div class="rewards-balance__next">
          <span class="rewards-balance__next-label">Next tier: <strong id="nextTier">Platinum</strong></span>
          <div class="rewards-balance__prog-bar">
            <div class="rewards-balance__prog-fill" id="tierProgress"></div>
          </div>
          <span class="rewards-balance__next-pts" id="tierPtsLabel">250 pts to go</span>
        </div>
      </div>
    </div>

    <!-- Reward Catalogue -->
    <h2 class="rewards-section-title" data-reveal>Redeem Rewards</h2>
    <div class="rewards-grid" id="rewardsGrid" data-reveal>
      <!-- Dynamically populated -->
    </div>

    <!-- Redemption History -->
    <h2 class="rewards-section-title" data-reveal>Redemption History</h2>
    <div class="rewards-history" id="rewardsHistory" data-reveal>
      <div class="rewards-history__empty" id="historyEmpty">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
          <path d="M20 8v12l6 4" stroke="var(--gray-300)" stroke-width="2" stroke-linecap="round"/>
          <circle cx="20" cy="20" r="16" stroke="var(--gray-300)" stroke-width="2"/>
        </svg>
        <p>No redemptions yet — start redeeming!</p>
      </div>
    </div>
  </main>

  <script src="js/api.js"></script>
  <script src="js/store.js"></script>
  <script src="js/auth.js"></script>
  <script>SaralAuth.requireAuth('user');</script>
  <script src="js/rewards.js"></script>
</body>
</html>
